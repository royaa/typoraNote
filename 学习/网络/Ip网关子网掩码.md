#  ip地址分类

| 网络类别 |  最大网络数   |         ip地址范围          | 最大主机数 |          私有ip范围           |
| :------: | :-----------: | :-------------------------: | :--------: | :---------------------------: |
|    A     |  126(2^7-2)   |  1.0.0.0 - 126.255.255.255  |   2^24-2   |   10.0.0.0 - 10.255.255.255   |
|    B     |  16384(2^14)  | 128.0.0.0 - 191.255.255.255 |   2^16-2   |  172.16.0.0 - 172.31.255.255  |
|    C     | 2097152(2^21) | 192.0.0.0 - 223.255.255.255 |   2^8-2    | 192.168.0.0 - 192.168.255.255 |

1. A类 
   * 网+主+主+主 
   * 网络位最高位必须是 0   （二进制即为00000000~01111111）
   * 保留使用位：全0表示本地网络，全1表示保留诊断作用

2. B类
   * 网+网+主+主
   * 网络位最高位必须是 10 （二进制即为10000000~10111111）
3. C类
   * 网+网+网+主
   * 网络地址最高位必须为110（二进制即为11000000~11011111）

# 子网掩码与斜杠表示法关系

|    子网掩码     | CIDR |
| :-------------: | :--: |
|    255.0.0.0    |  /8  |
|   255.128.0.0   |  /9  |
|   255.192.0.0   | /10  |
|   255.224.0.0   | /11  |
|   255.240.0.0   | /12  |
|   255.248.0.0   | /13  |
|   255.252.0.0   | /14  |
|   255.254.0.0   | /15  |
|   255.255.0.0   | /16  |
|  255.255.128.0  | /17  |
|  255.255.192.0  | /18  |
|  255.255.224.0  | /19  |
|  255.255.240.0  | /20  |
|  255.255.248.0  | /21  |
|  255.255.252.0  | /22  |
|  255.255.254.0  | /23  |
|  255.255.255.0  | /24  |
| 255.255.255.128 | /25  |
| 255.255.255.192 | /26  |
| 255.255.255.224 | /27  |
| 255.255.255.240 | /28  |
| 255.255.255.248 | /29  |
| 255.255.255.252 | /30  |

# VLSM与CIDR

## 背景

ip地址原本是按有类划分的，但是这种制定方式不大合理。如一家企业拥有20000台电脑，所以需要申请一个B类地址，但是B类地址最多能容纳64534个主机，因此会多出40000多个ip空余，造成ip地址浪费。当时ipv6还没有出现，为了能最大限度的利用ip地址，出现了VLSM。而CIDR是VLSM的反向聚集。	

## VLSM(可变长子网掩码)

划分子网，一句话，其实就是网络号向主机号借位

例：208.208.208.0 这是一个C类地址，如果需要划分出一个容纳100台电脑的子网

* 2^(7) = 128 > 100 且 2^(6) = 64 < 100

  得出主机位至少需要7位

  网络位32 - 7 = 25位

  网络位向主机位借一位 子网掩码为 255.255.255.128

* 11010000.11010000.11010000.00000000 = 208.208.208.0

  11111111.11111111.11111111.10000000 = 255.255.255.128

  二进制相与，得出新的子网地址为208.208.208.0/25

* 因此C类地址208.208.208.0/24 可以划分为两个子网 208.208.208.0/25 和 208.208.208.128/25

  每个子网可以容纳126台主机，其中一个子网可以达到需求，另一个可以给其他公司使用，达到充分利用ip目的

## CIDR(无类别域间路由）

作用：

1. **把多个地址块聚合到一起，生成一个能容纳更多主机的网络；**
2. 汇总路由表IP地址，分担路由表压力。

与vlsm区别：

1. VLSM是网络号向主机号借位，目的是把一个标准的网络划分成几个子网，减少子网主机数量；

2. CIDR是主机号向网络号借位，目的是把几个网络汇总成一个大的网络，增加子网主机数量。

例子：

* 208.208.208.0/25和208.208.208.128/25两个子网地址可以汇总成208.208.208.0/24

* 208.208.208.0/24也可以与208.208.208.1/24汇总成208.208.208.2/23。

概念：

CIDR也可以用来做IP地址汇总（超网）。由于在Internet环境中，运营商的路由器所拥有的路由条目是异常庞大的。但在采用CIDR后，就可以将连续的地址空间总结成一条路由条目，路由表不再需要对外宣称所有网段的信息，这样做可以大大地减少路由表中的条目数量。



# 网关

网关实质上是一个网络通向其他网络的IP地址。比如有网络A和网络B

网络A的[IP](http://baike.baidu.com/view/8370.htm)地址范围为“192.168.1.1~192. 168.1.254”，[子网掩码](http://baike.baidu.com/view/878.htm)为255.255.255.0；

网络B的IP地址范围为“192.168.2.1~192.168.2.254”，子网掩码为255.255.255.0。

在没有路由器的情况下，两个网络之间是不能进行TCP/IP通信的，即使是两个网络连接在同一台交换机上，TCP/IP协议也会根据子网掩码(255.255.255.0)判定两个网络中的主机处在不同的网络里。

而要实现这两个网络之间的通信，则必须通过网关。如果网络A中的主机发现数据包的目的主机不在本地网络中，就把数据包转发给它自己的网关，再由网关转发给网络B的网关，网络B的网关再转发给网络B的某个主机。网络B向网络A转发数据包的过程。

# 工具

> https://www.sojson.com/convert/subnetmask.html